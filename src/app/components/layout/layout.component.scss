@use "palette" as *;
@use "colors" as *;
@use "breakpoints" as *;
@use "sass:color";

@keyframes ShiftSidebarIn {
  from {
    transform: translateX(-260px);
  }
  to {
    transform: translateX(0px);
  }
}
@keyframes ShiftSidebarOut {
  from {
    transform: translateX(260px);
    opacity: 0.3;
  }
  to {
    transform: translateX(0px);
    opacity: 1;
  }
}
@keyframes MobileFadeSidebarIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0px);
  }
}

:host {
  display: block;
}

.layout {
  :host(:not(.closed)) & {
    overflow: hidden;
  }
}

%shifted {
  &-content,
  &-sidebar {
    @extend %shifted;
    animation-duration: var(--shift-duration, 400ms);
    animation-timing-function: ease-in-out;
  }
  &-content {
    --shift-name: ShiftSidebarIn;
  }
  &-sidebar {
    --shift-name: ShiftSidebarOut;
  }
  @include mobileWidth {
    &-content {
      --shift-name: none;
    }
    &-sidebar {
      --shift-name: MobileFadeSidebarIn;
      transform-origin: top center;
      animation-duration: var(--shift-duration, 200ms);
    }
  }
  :host(.opening) & {
    animation-direction: normal;
    animation-name: var(--shift-name, none);
  }
  :host(.closing) & {
    animation-direction: reverse;
    animation-name: var(--shift-name, none);
  }
}
.header {
  position: sticky;
  top: -60px;
  height: 100px;
  z-index: 1;
  :host(.closing) &,
  :host(.opening) & {
    z-index: 0;
  }
}
.toolbar {
  color: $gray-5;
  border-bottom: 1px solid $light-gray-5;
  height: 100%;
  width: 100%;
  &.is-elevated {
    @include shadow(5);
  }
}
.toolbar-first-row {
  display: flex;
  display: -webkit-flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
}
.toolbar-second-row {
  @extend %shifted-content;
  padding-left: var(--toolbar-tabs--padding-left, 0.75rem);
  display: grid;
  grid-auto-flow: column;
  justify-content: left;
  align-items: center;
  gap: 0.75rem;
  :host(.closing) &,
  :host(.opening) & {
    width: 100%;
  }
  :host(:not(.closed)) & {
    --toolbar-tabs--padding-left: calc(260px + 0.75rem);
  }
  @include media-size("zero", "small") {
    padding-left: 0px;
  }
}
.toolbar-tabs {
  --tab-container--width: 100%;

  :host(.closing) &,
  :host(.opening) & {
    --tab-container--width: 100vw;
    overflow: visible;
  }
}
.main {
  @extend %shifted-content;
  display: grid;
  grid-template-columns: 0 1fr;
  grid-template-rows: calc(100vh - 100px);
  grid-template-areas: "side content";
  :host(.closing) & {
    grid-template-areas: "side content content";
    grid-template-columns: 260px 260px 1fr;
  }
  :host(.opening) &,
  :host(.opened) & {
    grid-template-columns: 260px 1fr;
  }
  @include media-size("zero", "small") {
    display: block;
    min-height: calc(100vh - 100px);
  }
}
.table-section {
  grid-area: content;
  background-color: $light-gray-2;
  overflow-x: hidden;
  height: 100%;
  display: flex;
  justify-content: center;
  width: 100%;
  position: relative;
  :host(.closing) &,
  :host(.opening) & {
    width: 100vw;
    @include media-size("zero", "small") {
      max-height: calc(100vh - 100px);
      overflow: hidden;
    }
  }
  @include media-size("zero", "small") {
    display: block;
    min-height: calc(100vh - 100px);
  }
}

.table-card {
  transform-origin: left center;
}

.rounded-tab-breakpoint {
  position: absolute;
  height: 20px;
  top: 105px;
  width: 100%;
  pointer-events: none;
  visibility: hidden;
}
.sidebar-section {
  overflow: visible;
  height: 100%;
  width: 100%;
  position: relative;
  top: 0px;

  :host(.closing) &,
  :host(.opening) & {
    overflow-x: clip;
  }
  :host(.closing) &,
  :host(.closed) & {
    pointer-events: none;
  }
  @include media-size("zero", "small") {
    overflow: hidden;
    position: absolute;
    z-index: 10;
  }
}

.sidebar-toggle {
  position: absolute;
  top: -33px;
  right: -33px;
  z-index: 5;
}

.sidebar {
  @extend %shifted-sidebar;
}

.toolbar-small-toggle {
  --icon-button--size: 26px;
  --icon-button--color: #fff;
  --icon-button--active-color: #{#fff};
  --icon-button--background-color: rgba(255, 255, 255, 0.2);
  --icon-button--outline-color: #{color.scale(#fff, $alpha: -70%)};
  --icon-button--shadow: #000;
}
